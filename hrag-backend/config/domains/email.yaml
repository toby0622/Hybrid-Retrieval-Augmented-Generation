# Email Domain Configuration
# For use with Enron email dataset (enron_schema.py)

name: email
display_name: "Email Assistant"
description: "Intelligent email search, summarization, and analysis"
schema: enron

# Intent classification
intents:
  - search      # User wants to find specific emails
  - summarize   # User wants to summarize email threads/topics
  - analyze     # User wants to analyze communication patterns
  - chat        # General conversation
  - end         # End conversation

intent_keywords:
  search:
    - 找
    - 搜尋
    - 查詢
    - search
    - find
    - look for
    - 有沒有
    - 誰寄
    - 寄給誰
  summarize:
    - 摘要
    - 總結
    - summarize
    - summary
    - 重點
  analyze:
    - 分析
    - 統計
    - analyze
    - pattern
    - 頻率
    - 多少封

# Slot filling configuration
slots:
  required:
    - topic  # At least need a topic/keyword to search
  optional:
    - sender
    - recipient
    - date_range
    - folder
  examples:
    topic:
      - "California energy crisis"
      - "Enron stock"
      - "trading strategy"
    sender:
      - "jeff.skilling@enron.com"
      - "kenneth.lay@enron.com"
    recipient:
      - "all@enron.com"
    date_range:
      - "2001年"
      - "last month"
      - "Q4 2000"

# Classification prompt configuration
classification_prompt:
  system_identity: |
    You are IntentClassifier, an AI component within the Email Assistant system.
    Your responsibility is to classify user messages about email search and analysis.
  capabilities:
    - Search emails by sender, recipient, topic, or date
    - Summarize email threads and conversations
    - Analyze communication patterns between people
    - Answer questions about email content

# Clarification prompt configuration  
clarification_prompt:
  system_identity: |
    You are ClarificationAgent for the Email Assistant.
    Your responsibility is to gather missing information for email searches.
  examples:
    - known: "Topic: California energy"
      missing: "date_range"
      question: "您想搜尋哪個時間範圍的郵件？例如：2001年、去年 Q4 等。"
    - known: "Sender: jeff.skilling"
      missing: "topic"
      question: "請問您想找 Jeff Skilling 關於什麼主題的郵件？"

# Reasoning prompt configuration
reasoning_prompt:
  system_identity: |
    You are EmailAnalyzer, the core analysis engine of the Email Assistant.
    Your responsibility is to synthesize email search results and provide insights.
  capabilities:
    - Identify key themes and topics in emails
    - Trace communication threads and relationships
    - Summarize lengthy email conversations
    - Highlight important information and decisions

# Chat response configuration
chat_prompt:
  system_identity: |
    You are Email Assistant, a friendly AI that helps users search and analyze email archives.
    You were designed to make finding information in large email datasets easy and efficient.
  capabilities:
    - Search emails by various criteria (sender, recipient, topic, date)
    - Summarize email threads and conversations
    - Analyze communication patterns
    - Answer questions about email content

# Database queries
graph_queries:
  primary_search: |
    MATCH (e:Email)
    WHERE toLower(e.subject) CONTAINS toLower($hint)
       OR toLower(e.body) CONTAINS toLower($hint)
    OPTIONAL MATCH (e)<-[:SENT_BY]-(sender:Person)
    OPTIONAL MATCH (e)-[:SENT_TO]->(recipient:Person)
    RETURN e.message_id as id, e.subject as subject, 
           e.date as date, sender.name as sender,
           collect(recipient.name) as recipients
    ORDER BY e.date DESC
    LIMIT 10
    
  person_search: |
    MATCH (p:Person)-[r]-(e:Email)
    WHERE toLower(p.name) CONTAINS toLower($hint)
       OR toLower(p.email) CONTAINS toLower($hint)
    RETURN p.name as name, p.email as email,
           type(r) as relationship, count(e) as email_count
    ORDER BY email_count DESC
    LIMIT 10
    
  context_search: |
    MATCH (e:Email)-[r]-(related)
    WHERE e.message_id = $message_id
    RETURN e, type(r) as relationship, labels(related)[0] as type,
           properties(related) as data
    LIMIT 20
    
  fallback_search: |
    MATCH (e:Email)
    RETURN e.message_id as id, e.subject as subject, e.date as date
    ORDER BY e.date DESC
    LIMIT 5

# Vector search filter fields
vector_filter_fields:
  - sender
  - folder
  - date

# Response language
response_language: "zh-TW"
